<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Dunamys — Dashboard</title>
    <link rel="stylesheet" href="/CSS/styles.css" />
</head>

<body>
    <div class="shell">
        <div class="panel">
            <aside class="sidebar">
                <div class="brand-aside">Dunamys</div>
                <ul class="nav">
                    <li><button class="nav-btn">General</button></li>
                </ul>
                <div class="subhead cerrar">
                    <button id="btn-logout" class="nav-btn">Cerrar Sesión</button>
                </div>
            </aside>

            <header class="header">
                <div class="logo">
                    <img src="/IMG/Dunamys_Logo.png" alt="Logo Dunamys" class="logo-img" />
                    <span class="word">DUNAMYS</span>
                </div>
            </header>

            <main class="content">
                <h2 id="hello">Cargando usuario…</h2>
                <div class="grid">
                    <div class="col">
                        <div class="frame">
                            <div class="card">
                                <h4>Bienvenido</h4>
                                <div class="sub">Este contenido está protegido</div>
                                <div class="line"></div>
                                <div class="amount">OK</div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

        </div>
        <footer class="foot">Dunamys</footer>
    </div>

    <script type="module">
        import { requireAuth, authFetch, logout } from '/JS/auth.js'; const API_BASE = 'http://localhost:8081'; (async () => { await requireAuth({ validateWithServer: true, apiBase: API_BASE }); try { const r = await authFetch(`${API_BASE}/api/me`); document.getElementById('hello').textContent
        = r.ok ? `Hola, ${(await r.json()).nombre}` : 'No se pudo cargar el usuario.'; } catch { document.getElementById('hello').textContent = 'Error conectando al servidor.'; } document.getElementById('btn-logout')?.addEventListener('click', () => {
        logout(); location.replace('/'); }); })();
    </script>


</body>

</html>